(this["webpackJsonpr34-react"]=this["webpackJsonpr34-react"]||[]).push([[0],{188:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var c=n(1),a=n.n(c);let i=[];const r=new IntersectionObserver(e=>{e.forEach(e=>{const t=i.find(t=>t.element===e.target);t&&t.update(e.isIntersecting)})},{threshold:1});function s(e){const[t,n]=a.a.useState(!1),c=a.a.useCallback(e=>{n(e)},[]);return a.a.useEffect(()=>{if(e){const t={element:e,update:c};return i.push(t),r.observe(e),()=>{i.filter(e=>e!==t),r.unobserve(e)}}},[c,e]),[t]}},189:function(e,t,n){"use strict";n.d(t,"a",function(){return Se});var c,a=n(1),i=n.n(a),r=n(19),s=n(3),o=n(5),l=n(4);const u=Object(l.e)(c||(c=Object(o.a)(["\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n"])));var d,b,j,h,O=n(53);const g=l.d.input(e=>{let{$controls:t,$accent:n,theme:c}=e;return Object(l.c)(h||(h=Object(o.a)(["\n    ","\n    ","\n  "])),function(e){let{$accent:t,theme:n}=e;return Object(l.c)(j||(j=Object(o.a)(["\n    -webkit-appearance: none;\n    flex-grow: 1;\n    background: ",";\n    border-radius: 100px;\n    height: 6px;\n\n    &::-moz-range-progress {\n      background-color: ",";\n    }\n\n    &::-ms-fill-lower {\n      background-color: ",";\n    }\n  "])),e=>e.theme.colors.layerBg,t?n.colors.accentColor:n.colors.backgroundColor2,t?n.colors.accentColor:n.colors.backgroundColor2)}({$accent:n,theme:c}),function(e){let{$controls:t,theme:n}=e;const c=Object(l.c)(d||(d=Object(o.a)(["\n    height: 16px;\n    width: 16px;\n    border-radius: 100px;\n    background: ",";\n    cursor: pointer;\n  "])),t?n.colors.backgroundColor2:"transparent");return Object(l.c)(b||(b=Object(o.a)(["\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ","\n    }\n\n    &::-moz-range-thumb {\n      ","\n    }\n\n    &::-ms-thumb {\n      ","\n    }\n  "])),c,c,c)}({$controls:t,theme:c}))});var m=n(2);var f;const p=l.d.svg(f||(f=Object(o.a)(["\n  > rect {\n    transition: all 0.2s ease-in;\n  }\n\n  &.play {\n    .left {\n      clip-path: path('M1.61 0 L10.1 4.9 L10.1 19.1 L1.61 24');\n    }\n\n    .right {\n      clip-path: path('M22.39 12 L9.9 4.79 L9.9 19.21 L22.39 12');\n    }\n  }\n\n  &.pause {\n    .left {\n      clip-path: path('M4.8 0 L10 0 L10 24 L4.8 24');\n    }\n\n    .right {\n      clip-path: path('M19.2 0 L14 0 L14 24 L19.2 24');\n    }\n  }\n"])));var x,v=n(11),k=n(22),w=n(16),S=n(6),y=n(81),C=n(21);const F=Object(l.d)(C.c)(e=>{let{theme:t}=e;return Object(l.c)(x||(x=Object(o.a)(["\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ","\n    padding: ",";\n    cursor: pointer;\n  "])),y.a,t.dimensions.bigSpacing)});function E(e){const{index:t}=e,n=Object(v.b)(),c=Object(k.f)(),a=i.a.useCallback(e=>{e.stopPropagation(),c.goBack(),n(Object(S.K)(t))},[n,c,t]),s=i.a.useCallback(e=>{e.stopPropagation(),n(Object(S.M)(t)),c.push(r.c.STORIES)},[n,c,t]);return c.location.pathname===r.c.STORIES?Object(m.jsx)(F,{onClick:a,"aria-label":"Exit fullscreen",title:"Exit fullscreen",children:Object(m.jsx)(w.h,{color:"white"})}):Object(m.jsx)(F,{onClick:s,"aria-label":"Enter fullscreen",title:"Enter fullscreen",children:Object(m.jsx)(w.o,{color:"white"})})}var L,P,A,T=n(47),V=n(13);const B=l.d.div(L||(L=Object(o.a)(["\n  grid-area: 3/1/4/2;\n  ","\n  place-self: end start;\n  place-items: start center;\n"])),V.f),I=l.d.a(e=>{let{theme:t}=e;return Object(l.c)(P||(P=Object(o.a)(["\n    padding: ",";\n    cursor: pointer;\n    ","\n\n    svg {\n      transition: all "," ease-out;\n    }\n  "])),t.dimensions.bigSpacing,Object(y.a)({theme:t}),t.timings.transitionTime)}),N=Object(l.d)(C.c)(A||(A=Object(o.a)(["\n  cursor: pointer;\n"])));function R(e){const{fullSrc:t}=e,n=i.a.useCallback(e=>{e.stopPropagation(),Object(T.b)(t)},[t]);return Object(m.jsxs)(B,{children:[Object(m.jsx)(I,{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":"Open In New Tab",title:t,children:Object(m.jsx)(w.p,{color:"white",title:"Open image in new tab"})}),Object(m.jsx)(N,{"aria-label":"Download Image",onClick:n,title:t,children:Object(m.jsx)(w.n,{color:"white"})})]})}var M,$,D,q,z,G,H,J,K,W=n(10);const Y=l.d.div(D||(D=Object(o.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto 1fr auto auto;\n\n  ",";\n"])),function(e){let{isVisible:t}=e;return t?Object(l.c)(M||(M=Object(o.a)([""]))):Object(l.c)($||($=Object(o.a)(["\n        opacity: 0;\n        animation: "," 0.4s ease-in;\n      "])),u)}),_=Object(l.d)(e=>{const{isPaused:t,videoRef:n,className:c,onChange:r,onEnded:s}=e,o=i.a.useRef(null),u=Object(l.f)(),d=Object(a.useCallback)(e=>{const t=Number(e.target.value);r(t)},[r]),b=Object(a.useCallback)(e=>{e.stopPropagation()},[]);return i.a.useEffect(()=>{if(s&&n)return n.addEventListener("ended",s),()=>n.removeEventListener("ended",s)}),i.a.useEffect(()=>{if(!t){let e;const t=()=>{if(null!==o&&void 0!==o&&o.current&&n){o.current.value=n.currentTime.toString();const e=n.currentTime/n.duration*100;o.current.style.backgroundImage="linear-gradient(90deg, ".concat(u.colors.accentColor," ").concat(e,"%, transparent ").concat(e,"%)")}e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>{cancelAnimationFrame(e)}}},[t,u.colors.accentColor,u.colors.backgroundColor2,n]),Object(m.jsx)(g,{ref:o,type:"range",step:1,min:0,max:(null===n||void 0===n?void 0:n.duration)||0,onChange:d,className:c,onClick:b,$controls:!0,$accent:!0})})(e=>{let{theme:t}=e;return Object(l.c)(q||(q=Object(o.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),t.dimensions.bigSpacing)}),Q=Object(l.d)(function(e){const{onFinished:t=r.b,onBack:n=r.b,isActive:c}=e,a={ArrowRight:()=>t(),ArrowLeft:()=>n()};i.a.useEffect(()=>{const e=e=>{const t="".concat(e.key);t in a&&(e.preventDefault(),e.stopPropagation(),a[t]())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)});const s=Object(v.b)(),[o,l]=i.a.useState(!1),u=i.a.useCallback(e=>s(Object(S.M)(e)),[s]),d=1e3*Object(v.c)(W.g),b=i.a.useRef(null);return i.a.useEffect(()=>{const e=()=>l(!0);return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),i.a.useEffect(()=>{const e=()=>l(!1);return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}}),i.a.useEffect(()=>{if(!o&&c){let e,n=(new Date).getTime();const c=()=>{if(b.current){const a=(new Date).getTime(),i=Number(b.current.value)+(a-n);n=a,b.current.value=i.toString();const r=i/d*100;b.current.style.backgroundImage="linear-gradient(90deg, #ffffff80 ".concat(r,"%, transparent ").concat(r,"%)"),i>=Number(b.current.max)?(t(),b.current&&(b.current.value="0")):e=requestAnimationFrame(c)}};return e=requestAnimationFrame(c),()=>{cancelAnimationFrame(e)}}},[d,c,o,t,e.index,u]),Object(m.jsx)(g,{ref:b,type:"range",step:1,min:0,max:d,onChange:r.b,onClick:r.b,$controls:!1,$accent:!1,className:e.className})})(e=>{let{theme:t}=e;return Object(l.c)(z||(z=Object(o.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),t.dimensions.bigSpacing)}),U=Object(l.d)(function(e){const{onClick:t,className:n="",isPaused:c}=e;return Object(m.jsxs)(p,{name:"Play/Pause",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:t,className:"".concat(n," ").concat(c?"play":"pause"),children:[Object(m.jsx)("rect",{className:"left",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"}),Object(m.jsx)("rect",{className:"right",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"})]})})(G||(G=Object(o.a)(["\n  height: 50px;\n  width: 50px;\n  grid-area: 2/2/3/3;\n  place-self: center center;\n  cursor: pointer;\n  fill: white;\n  ","\n"])),y.a),X=l.d.span(e=>Object(l.c)(H||(H=Object(o.a)(["\n    grid-area: 3/3/4/4;\n    place-self: end end;\n    background: #00000080;\n    color: white;\n    border-radius: 4px;\n    padding: ",";\n    margin: ",";\n  "])),e.theme.dimensions.spacing,e.theme.dimensions.bigSpacing)),Z=l.d.div(J||(J=Object(o.a)(["\n  display: grid;\n  grid-area: 2/3/3/4;\n  place-items: center;\n  opacity: 0;\n"]))),ee=l.d.div(K||(K=Object(o.a)(["\n  display: grid;\n  grid-area: 2/1/3/2;\n  place-items: center;\n  opacity: 0;\n"])));function te(e){const{index:t,fullSrc:n,isFullscreen:c,isActive:a,onFinished:i,onBack:r}=e;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{index:t}),Object(m.jsx)(R,{fullSrc:n}),c&&Object(m.jsx)(Q,{index:t,onFinished:i,onBack:r,isActive:a})]})}function ne(e){const{fullSrc:t,isPaused:n,index:c,onTogglePaused:a,isFullscreen:i,isActive:r,onFinished:s,onBack:o}=e;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{index:c}),Object(m.jsx)(R,{fullSrc:t}),Object(m.jsx)(U,{isPaused:n,onClick:a,"aria-label":"Play/Pause"}),i&&Object(m.jsx)(Q,{index:c,isPaused:n,onBack:o,onFinished:s,isActive:r}),Object(m.jsx)(X,{children:"GIF"})]})}function ce(e){const{fullSrc:t,isPaused:n,index:c,onTogglePaused:i,onSeek:r,duration:s,videoRef:o,isActive:l,onFinished:u}=e,d=Object(a.useCallback)(e=>{e.preventDefault(),o&&r(o.currentTime+10)},[r,o]),b=Object(a.useCallback)(e=>{e.preventDefault(),o&&r(o.currentTime-10)},[r,o]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{index:c}),Object(m.jsx)(R,{fullSrc:t}),Object(m.jsx)(ee,{onDoubleClick:b,children:Object(m.jsx)(w.d,{tabIndex:0})}),Object(m.jsx)(U,{isPaused:n||!l,onClick:i,"aria-label":"Play/Pause"}),Object(m.jsx)(Z,{onDoubleClick:d,children:Object(m.jsx)(w.r,{tabIndex:0})}),Object(m.jsx)(X,{children:Object(O.c)(s)}),Object(m.jsx)(_,{isPaused:n||!l,videoRef:o,onChange:r,onEnded:u})]})}function ae(e){switch(e.type){case"image":return Object(m.jsx)(te,Object(s.a)({},e));case"gif":return Object(m.jsx)(ne,Object(s.a)({},e));case"video":return Object(m.jsx)(ce,Object(s.a)({},e))}}function ie(e){const{isVisible:t,setVisible:n}=e,c=i.a.useCallback(()=>n(!t),[t,n]);return Object(m.jsx)(Y,{isVisible:t,onClick:c,"data-testid":"overlay-wrapper","data-name":"overlay",className:"overlay",children:ae(e)})}var re,se=n(74),oe=n(61);var le,ue,de=l.d.video(re||(re=Object(o.a)(["\n  ","\n  ","\n  grid-area: 1/1/2/2;\n"])),se.a,se.c);const be=Object(l.d)(de)(le||(le=Object(o.a)(["\n  ","\n"])),se.b),je=Object(l.d)(oe.a)(ue||(ue=Object(o.a)(["\n  ","\n"])),se.b);function he(e){const{viewSrc:t,fullSrc:n,index:c,onLoad:a=r.b,width:i,height:s,isFullscreen:o,isActive:l,onFinished:u,onBack:d}=e;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{"data-testid":"image",src:t,alt:t,onLoad:a,loading:"lazy",width:i,height:s}),Object(m.jsx)(ie,{type:"image",fullSrc:n,index:c,isVisible:!0,setVisible:r.b,isFullscreen:o,onFinished:u,onBack:d,isActive:l})]})}var Oe=n(188);let ge,me,fe=!1,pe=[];const xe=()=>{const[e,t]=i.a.useState(fe);return void 0===ge&&(ge=e=>{fe=!0,pe.forEach(e=>e(fe)),me&&clearTimeout(me),me=setTimeout(()=>{fe=!1,pe.forEach(e=>e(fe))},500)},document.addEventListener("scroll",ge,{passive:!0})),i.a.useEffect(()=>(pe.push(t),t(fe),()=>{pe=pe.filter(e=>e!==t),0===pe.length&&ge&&(document.removeEventListener("scroll",ge),ge=void 0)}),[]),e};function ve(e){const[t,n]=i.a.useState(!1),[c]=Object(Oe.a)(e),a=xe();return i.a.useEffect(()=>{c&&!a&&n(!0)},[c,a]),i.a.useEffect(()=>{c||n(!1)},[c]),t}function ke(e){const{viewSrc:t,thumbnailSrc:n,fullSrc:c,onLoad:s=r.b,index:o,width:l,height:u,detailsVisible:d,isFullscreen:b,onFinished:j,isActive:h}=e,[O,g]=i.a.useState(!0),[f,p]=Object(a.useState)(!1),[x,k]=Object(a.useState)(null),w=Object(v.c)(W.f),S=ve(x),y=Object(v.c)(W.x),C=f?t:n,F=i.a.useCallback(async()=>{p(!0)},[]),E=i.a.useCallback(()=>{p(!1)},[]),L=i.a.useCallback(e=>{e.stopPropagation(),f?p(!1):(p(!0),g(!1))},[f]);return i.a.useEffect(()=>{(w||b)&&S&&(p(!0),g(!1)),S||p(!1)},[S,b,E,F,w]),Object(a.useEffect)(()=>{if(y){(new Image).src=t}}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{"data-testid":"gif",ref:k,src:C,alt:C,loading:"lazy",onLoad:s,width:l,height:u}),Object(m.jsx)(ie,{isVisible:!f||O||d,setVisible:g,type:"gif",fullSrc:c,index:o,isPaused:!f,onTogglePaused:L,isFullscreen:b,onFinished:j,isActive:h})]})}function we(e){const{viewSrc:t,fullSrc:n,onLoad:c=r.b,index:s,width:o,height:l,detailsVisible:u,isFullscreen:d,isActive:b,onFinished:j}=e,[h,O]=Object(a.useState)(!1),[g,f]=i.a.useState(!0),[p,x]=Object(a.useState)(null),k=ve(p),w=Object(v.c)(W.y)?"auto":"metadata",S=Object(v.c)(W.f),y=i.a.useCallback(async()=>{if(null!==p&&void 0!==p&&p.paused)try{await p.play(),O(!0)}catch(e){e.message.includes("user didn't interact with the document first")?console.warn("Autoplay failed because the user did not interact with the page first:",e):e.message.includes("play() request was interrupted by a call to pause()")?console.warn("Play was interrupted by pause",e):console.error("Failed to start video:",e)}},[p]),C=i.a.useCallback(()=>{if(null===p||void 0===p||!p.paused)try{null===p||void 0===p||p.pause(),O(!1)}catch(e){console.error("Failed to start video:",e)}},[p]),F=i.a.useCallback(e=>{p&&(p.currentTime=e)},[p]),E=i.a.useCallback(e=>{e.stopPropagation(),p&&(p.paused?(y(),f(!1)):C())},[C,y,p]);return i.a.useEffect(()=>{(S||d)&&k&&(y(),f(!1)),k||C()},[k,d,C,y,S]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(be,{"data-testid":"video",controls:!1,loop:!d,preload:w,ref:x,onLoadedMetadata:c,width:o,height:l,src:t}),Object(m.jsx)(ie,{type:"video",index:s,fullSrc:n,isPaused:!h,duration:(null===p||void 0===p?void 0:p.duration)||0,onTogglePaused:E,onSeek:F,videoRef:p,isVisible:!1===h||u||g,setVisible:f,isFullscreen:d,onFinished:j,isActive:b})]})}function Se(e){const{type:t,thumbnailSrc:n,sampleSrc:c,fullSrc:a,index:r,onLoad:s,width:o,height:l,detailsVisible:u,isFullscreen:d=!1,onBack:b,onFinished:j,isActive:h=!1}=e,[O,g]=function(e,t,n,c){const a=Object(v.c)(W.q);return i.a.useMemo(()=>{switch(e){case"image":return a?["",c]:["",n];case"gif":return n.includes(".gif")?[t,n]:[n,c];case"video":return a?[t,c]:[t,n]}},[c,a,n,t,e])}(t,n,c,a);switch(t){case"image":return Object(m.jsx)(he,{viewSrc:g,fullSrc:a,onLoad:s,index:r,width:o,height:l,isFullscreen:d,onFinished:j,onBack:b,isActive:h});case"gif":return Object(m.jsx)(ke,{detailsVisible:u,viewSrc:g,thumbnailSrc:O,fullSrc:a,onLoad:s,index:r,width:o,height:l,isFullscreen:d,onFinished:j,onBack:b,isActive:h});case"video":return Object(m.jsx)(we,{detailsVisible:u,viewSrc:g,thumbnailSrc:O,fullSrc:a,onLoad:s,index:r,width:o,height:l,isFullscreen:d,onFinished:j,onBack:b,isActive:h})}}},191:function(e,t,n){"use strict";n.d(t,"b",function(){return T}),n.d(t,"a",function(){return V});var c,a,i,r=n(3),s=n(5),o=n(1),l=n.n(o),u=n(11),d=n(4),b=n(19),j=n(84),h=n(91),O=n(10),g=n(61),m=n(82),f=n(51),p=n(41),x=n(80),v=n(22),k=n(58),w=n(16),S=n(21),y=n(2);function C(){return Object(v.g)().pathname===b.c.STORIES?Object(y.jsx)(E,{}):Object(y.jsx)(F,{})}function F(){const e=l.a.useCallback(()=>window.scrollTo(0,0),[]);return Object(y.jsxs)(S.b,{onClick:e,children:[Object(y.jsx)(w.b,{})," Take me to the top"]})}function E(){return Object(y.jsx)(k.b,{to:b.c.SEARCH,children:Object(y.jsxs)(S.b,{children:[Object(y.jsx)(w.b,{})," Take me to the top"]})})}const L=d.d.div(e=>{let{theme:t}=e;return Object(d.c)(c||(c=Object(s.a)(["\n    padding: ",";\n  "])),t.dimensions.bigSpacing)}),P=Object(d.d)(f.b)(e=>{let{theme:t}=e;return Object(d.c)(a||(a=Object(s.a)(["\n    max-width: ",";\n    margin: auto;\n    text-align: center;\n  "])),t.dimensions.bodyWidth)}),A=Object(d.d)(g.a)(i||(i=Object(s.a)(["\n  max-height: 50vh;\n"])));function T(e){let{onLoad:t=b.b,virtualRef:n,style:c}=e;return Object(y.jsx)(L,{style:c,ref:n,onLoad:t,role:"row",children:Object(y.jsx)(V,{})})}function V(){const e=Object(u.c)(O.e),t=Object(o.useMemo)(()=>e.reduce((e,t)=>(e[t.name]=Object(r.a)(Object(r.a)({},t),{},{types:[]}),e),{}),[e]),n=Object(j.a)();return Object(y.jsxs)(P,{children:[Object(y.jsx)(A,{src:h.a,alt:"Shironeko does not understand"}),Object(y.jsx)(m.a,{}),Object(y.jsx)(p.c,{children:"You have reached the end!"}),Object(y.jsx)("p",{children:"Go look for something else!"}),e.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("p",{children:"How about some of these?"}),Object(y.jsx)(x.a,{tags:t,onTagClick:n,onTagMenu:b.b,detailed:!0})]}),Object(y.jsx)(C,{})]})}}}]);
//# sourceMappingURL=0.ce366042.chunk.js.map