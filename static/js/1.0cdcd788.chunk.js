(this["webpackJsonpr34-react"]=this["webpackJsonpr34-react"]||[]).push([[1],{206:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var c=t(10),a=t(1),r=t.n(a),i=[],o=new IntersectionObserver((function(e){e.forEach((function(e){var n=i.find((function(n){return n.element===e.target}));n&&n.update(e.isIntersecting)}))}),{threshold:1});function s(e){var n=r.a.useState(!1),t=Object(c.a)(n,2),a=t[0],s=t[1],u=r.a.useCallback((function(e){s(e)}),[]);return r.a.useEffect((function(){if(e){var n={element:e,update:u};return i.push(n),o.observe(e),function(){i.filter((function(e){return e!==n})),o.unobserve(e)}}}),[u,e]),[a]}},207:function(e,n,t){"use strict";t.d(n,"a",(function(){return Fe}));var c,a,r,i,o,s=t(10),u=t(1),l=t.n(u),d=t(25),b=t(3),j=t(5),f=t(4),h=Object(f.e)(c||(c=Object(j.a)(["\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n"]))),O=t(66);var v,m=f.d.input((function(e){var n=e.$controls,t=e.$accent,c=e.theme;return Object(f.c)(o||(o=Object(j.a)(["\n    ","\n    ","\n  "])),function(e){var n=e.$accent,t=e.theme;return Object(f.c)(i||(i=Object(j.a)(["\n    -webkit-appearance: none;\n    flex-grow: 1;\n    background: ",";\n    border-radius: 100px;\n    height: 6px;\n\n    &::-moz-range-progress {\n      background-color: ",";\n    }\n\n    &::-ms-fill-lower {\n      background-color: ",";\n    }\n  "])),(function(e){return e.theme.colors.layerBg}),n?t.colors.accentColor:t.colors.backgroundColor2,n?t.colors.accentColor:t.colors.backgroundColor2)}({$accent:t,theme:c}),function(e){var n=e.$controls,t=e.theme,c=Object(f.c)(a||(a=Object(j.a)(["\n    height: 16px;\n    width: 16px;\n    border-radius: 100px;\n    background: ",";\n    cursor: pointer;\n  "])),n?t.colors.backgroundColor2:"transparent");return Object(f.c)(r||(r=Object(j.a)(["\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ","\n    }\n\n    &::-moz-range-thumb {\n      ","\n    }\n\n    &::-ms-thumb {\n      ","\n    }\n  "])),c,c,c)}({$controls:n,theme:c}))})),g=t(2),p=f.d.svg(v||(v=Object(j.a)(["\n  > rect {\n    transition: all 0.2s ease-in;\n  }\n\n  &.play {\n    .left {\n      clip-path: path('M1.61 0 L10.1 4.9 L10.1 19.1 L1.61 24');\n    }\n\n    .right {\n      clip-path: path('M22.39 12 L9.9 4.79 L9.9 19.21 L22.39 12');\n    }\n  }\n\n  &.pause {\n    .left {\n      clip-path: path('M4.8 0 L10 0 L10 24 L4.8 24');\n    }\n\n    .right {\n      clip-path: path('M19.2 0 L14 0 L14 24 L19.2 24');\n    }\n  }\n"])));var x,k=t(14),w=t(27),S=t(24),C=t(6),y=t(99),F=t(30),E=Object(f.d)(F.c)((function(e){var n=e.theme;return Object(f.c)(x||(x=Object(j.a)(["\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ","\n    padding: ",";\n    cursor: pointer;\n  "])),y.a,n.dimensions.bigSpacing)}));function L(e){var n=e.index,t=Object(k.b)(),c=Object(w.f)(),a=l.a.useCallback((function(e){e.stopPropagation(),c.goBack(),t(Object(C.L)(n))}),[t,c,n]),r=l.a.useCallback((function(e){e.stopPropagation(),t(Object(C.N)(n)),c.push(d.c.STORIES)}),[t,c,n]);return c.location.pathname===d.c.STORIES?Object(g.jsx)(E,{onClick:a,"aria-label":"Exit fullscreen",title:"Exit fullscreen",children:Object(g.jsx)(S.h,{color:"white"})}):Object(g.jsx)(E,{onClick:r,"aria-label":"Enter fullscreen",title:"Enter fullscreen",children:Object(g.jsx)(S.o,{color:"white"})})}var P,A,T,N=t(56),V=t(19),B=f.d.div(P||(P=Object(j.a)(["\n  grid-area: 3/1/4/2;\n  ","\n  place-self: end start;\n  place-items: start center;\n"])),V.f),I=f.d.a((function(e){var n=e.theme;return Object(f.c)(A||(A=Object(j.a)(["\n    padding: ",";\n    cursor: pointer;\n    ","\n\n    svg {\n      transition: all "," ease-out;\n    }\n  "])),n.dimensions.bigSpacing,Object(y.a)({theme:n}),n.timings.transitionTime)})),R=Object(f.d)(F.c)(T||(T=Object(j.a)(["\n  cursor: pointer;\n"])));function $(e){var n=e.fullSrc,t=l.a.useCallback((function(e){e.stopPropagation(),Object(N.b)(n)}),[n]);return Object(g.jsxs)(B,{children:[Object(g.jsx)(I,{href:n,target:"_blank",rel:"noopener noreferrer","aria-label":"Open In New Tab",title:n,children:Object(g.jsx)(S.p,{color:"white",title:"Open image in new tab"})}),Object(g.jsx)(R,{"aria-label":"Download Image",onClick:t,title:n,children:Object(g.jsx)(S.n,{color:"white"})})]})}var D,M,q,z,G,H,J,W,Y,_=t(13);var K=f.d.div(q||(q=Object(j.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto 1fr auto auto;\n\n  ",";\n"])),(function(e){return e.isVisible?Object(f.c)(D||(D=Object(j.a)([""]))):Object(f.c)(M||(M=Object(j.a)(["\n        opacity: 0;\n        animation: "," 0.4s ease-in;\n      "])),h)})),Q=Object(f.d)((function(e){var n=e.isPaused,t=e.videoRef,c=e.className,a=e.onChange,r=e.onEnded,i=l.a.useRef(null),o=Object(f.f)(),s=Object(u.useCallback)((function(e){var n=Number(e.target.value);a(n)}),[a]),d=Object(u.useCallback)((function(e){e.stopPropagation()}),[]);return l.a.useEffect((function(){if(r&&t)return t.addEventListener("ended",r),function(){return t.removeEventListener("ended",r)}})),l.a.useEffect((function(){if(!n){var e;return e=requestAnimationFrame((function n(){if((null===i||void 0===i?void 0:i.current)&&t){i.current.value=t.currentTime.toString();var c=t.currentTime/t.duration*100;i.current.style.backgroundImage="linear-gradient(90deg, ".concat(o.colors.accentColor," ").concat(c,"%, transparent ").concat(c,"%)")}e=requestAnimationFrame(n)})),function(){cancelAnimationFrame(e)}}}),[n,o.colors.accentColor,o.colors.backgroundColor2,t]),Object(g.jsx)(m,{ref:i,type:"range",step:1,min:0,max:(null===t||void 0===t?void 0:t.duration)||0,onChange:s,className:c,onClick:d,$controls:!0,$accent:!0})}))((function(e){var n=e.theme;return Object(f.c)(z||(z=Object(j.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),n.dimensions.bigSpacing)})),U=Object(f.d)((function(e){var n=e.onFinished,t=void 0===n?d.b:n,c=e.onBack,a=void 0===c?d.b:c,r=e.isActive,i={ArrowRight:function(){return t()},ArrowLeft:function(){return a()}};l.a.useEffect((function(){var e=function(e){var n="".concat(e.key);n in i&&(e.preventDefault(),e.stopPropagation(),i[n]())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}));var o=Object(k.b)(),u=l.a.useState(!1),b=Object(s.a)(u,2),j=b[0],f=b[1],h=l.a.useCallback((function(e){return o(Object(C.N)(e))}),[o]),O=1e3*Object(k.c)(_.g),v=l.a.useRef(null);return l.a.useEffect((function(){var e=function(){return f(!0)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}})),l.a.useEffect((function(){var e=function(){return f(!1)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}})),l.a.useEffect((function(){if(!j&&r){var e,n=(new Date).getTime();return e=requestAnimationFrame((function c(){if(v.current){var a=(new Date).getTime(),r=Number(v.current.value)+(a-n);n=a,v.current.value=r.toString();var i=r/O*100;v.current.style.backgroundImage="linear-gradient(90deg, #ffffff80 ".concat(i,"%, transparent ").concat(i,"%)"),r>=Number(v.current.max)?(t(),v.current&&(v.current.value="0")):e=requestAnimationFrame(c)}})),function(){cancelAnimationFrame(e)}}}),[O,r,j,t,e.index,h]),Object(g.jsx)(m,{ref:v,type:"range",step:1,min:0,max:O,onChange:d.b,onClick:d.b,$controls:!1,$accent:!1,className:e.className})}))((function(e){var n=e.theme;return Object(f.c)(G||(G=Object(j.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),n.dimensions.bigSpacing)})),X=Object(f.d)((function(e){var n=e.onClick,t=e.className,c=void 0===t?"":t,a=e.isPaused;return Object(g.jsxs)(p,{name:"Play/Pause",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:n,className:"".concat(c," ").concat(a?"play":"pause"),children:[Object(g.jsx)("rect",{className:"left",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"}),Object(g.jsx)("rect",{className:"right",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"})]})}))(H||(H=Object(j.a)(["\n  height: 50px;\n  width: 50px;\n  grid-area: 2/2/3/3;\n  place-self: center center;\n  cursor: pointer;\n  fill: white;\n  ","\n"])),y.a),Z=f.d.span((function(e){return Object(f.c)(J||(J=Object(j.a)(["\n    grid-area: 3/3/4/4;\n    place-self: end end;\n    background: #00000080;\n    color: white;\n    border-radius: 4px;\n    padding: ",";\n    margin: ",";\n  "])),e.theme.dimensions.spacing,e.theme.dimensions.bigSpacing)})),ee=f.d.div(W||(W=Object(j.a)(["\n  display: grid;\n  grid-area: 2/3/3/4;\n  place-items: center;\n  opacity: 0;\n"]))),ne=f.d.div(Y||(Y=Object(j.a)(["\n  display: grid;\n  grid-area: 2/1/3/2;\n  place-items: center;\n  opacity: 0;\n"])));function te(e){var n=e.index,t=e.fullSrc,c=e.isFullscreen,a=e.isActive,r=e.onFinished,i=e.onBack;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{index:n}),Object(g.jsx)($,{fullSrc:t}),c&&Object(g.jsx)(U,{index:n,onFinished:r,onBack:i,isActive:a})]})}function ce(e){var n=e.fullSrc,t=e.isPaused,c=e.index,a=e.onTogglePaused,r=e.isFullscreen,i=e.isActive,o=e.onFinished,s=e.onBack;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{index:c}),Object(g.jsx)($,{fullSrc:n}),Object(g.jsx)(X,{isPaused:t,onClick:a,"aria-label":"Play/Pause"}),r&&Object(g.jsx)(U,{index:c,isPaused:t,onBack:s,onFinished:o,isActive:i}),Object(g.jsx)(Z,{children:"GIF"})]})}function ae(e){var n=e.fullSrc,t=e.isPaused,c=e.index,a=e.onTogglePaused,r=e.onSeek,i=e.duration,o=e.videoRef,s=e.isActive,l=e.onFinished,d=Object(u.useCallback)((function(e){e.preventDefault(),o&&r(o.currentTime+10)}),[r,o]),b=Object(u.useCallback)((function(e){e.preventDefault(),o&&r(o.currentTime-10)}),[r,o]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{index:c}),Object(g.jsx)($,{fullSrc:n}),Object(g.jsx)(ne,{onDoubleClick:b,children:Object(g.jsx)(S.d,{tabIndex:0})}),Object(g.jsx)(X,{isPaused:t||!s,onClick:a,"aria-label":"Play/Pause"}),Object(g.jsx)(ee,{onDoubleClick:d,children:Object(g.jsx)(S.r,{tabIndex:0})}),Object(g.jsx)(Z,{children:Object(O.c)(i)}),Object(g.jsx)(Q,{isPaused:t||!s,videoRef:o,onChange:r,onEnded:l})]})}function re(e){switch(e.type){case"image":return Object(g.jsx)(te,Object(b.a)({},e));case"gif":return Object(g.jsx)(ce,Object(b.a)({},e));case"video":return Object(g.jsx)(ae,Object(b.a)({},e))}}function ie(e){var n=e.isVisible,t=e.setVisible,c=l.a.useCallback((function(){return t(!n)}),[n,t]);return Object(g.jsx)(K,{isVisible:n,onClick:c,"data-testid":"overlay-wrapper","data-name":"overlay",className:"overlay",children:re(e)})}var oe,se,ue,le=t(90),de=t(77),be=f.d.video(oe||(oe=Object(j.a)(["\n  ","\n  ","\n  grid-area: 1/1/2/2;\n"])),le.a,le.c),je=Object(f.d)(be)(se||(se=Object(j.a)(["\n  ","\n"])),le.b),fe=Object(f.d)(de.a)(ue||(ue=Object(j.a)(["\n  ","\n"])),le.b);function he(e){var n=e.viewSrc,t=e.fullSrc,c=e.index,a=e.onLoad,r=void 0===a?d.b:a,i=e.width,o=e.height,s=e.isFullscreen,u=e.isActive,l=e.onFinished,b=e.onBack;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(fe,{"data-testid":"image",src:n,alt:n,onLoad:r,loading:"lazy",width:i,height:o}),Object(g.jsx)(ie,{type:"image",fullSrc:t,index:c,isVisible:!0,setVisible:d.b,isFullscreen:s,onFinished:l,onBack:b,isActive:u})]})}var Oe,ve,me=t(7),ge=t.n(me),pe=t(15),xe=t(206),ke=!1,we=[];function Se(e){var n=l.a.useState(!1),t=Object(s.a)(n,2),c=t[0],a=t[1],r=Object(xe.a)(e),i=Object(s.a)(r,1)[0],o=function(){var e=l.a.useState(ke),n=Object(s.a)(e,2),t=n[0],c=n[1];return void 0===Oe&&(Oe=function(e){ke=!0,we.forEach((function(e){return e(ke)})),ve&&clearTimeout(ve),ve=setTimeout((function(){ke=!1,we.forEach((function(e){return e(ke)}))}),500)},document.addEventListener("scroll",Oe,{passive:!0})),l.a.useEffect((function(){return we.push(c),c(ke),function(){0===(we=we.filter((function(e){return e!==c}))).length&&Oe&&(document.removeEventListener("scroll",Oe),Oe=void 0)}}),[]),t}();return l.a.useEffect((function(){i&&!o&&a(!0)}),[i,o]),l.a.useEffect((function(){i||a(!1)}),[i]),c}function Ce(e){var n=e.viewSrc,t=e.thumbnailSrc,c=e.fullSrc,a=e.onLoad,r=void 0===a?d.b:a,i=e.index,o=e.width,b=e.height,j=e.detailsVisible,f=e.isFullscreen,h=e.onFinished,O=e.isActive,v=l.a.useState(!0),m=Object(s.a)(v,2),p=m[0],x=m[1],w=Object(u.useState)(!1),S=Object(s.a)(w,2),C=S[0],y=S[1],F=Object(u.useState)(null),E=Object(s.a)(F,2),L=E[0],P=E[1],A=Object(k.c)(_.f),T=Se(L),N=Object(k.c)(_.x),V=C?n:t,B=l.a.useCallback(Object(pe.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0);case 1:case"end":return e.stop()}}),e)}))),[]),I=l.a.useCallback((function(){y(!1)}),[]),R=l.a.useCallback((function(e){e.stopPropagation(),C?y(!1):(y(!0),x(!1))}),[C]);return l.a.useEffect((function(){(A||f)&&T&&(y(!0),x(!1)),T||y(!1)}),[T,f,I,B,A]),Object(u.useEffect)((function(){N&&((new Image).src=n)})),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(fe,{"data-testid":"gif",ref:P,src:V,alt:V,loading:"lazy",onLoad:r,width:o,height:b}),Object(g.jsx)(ie,{isVisible:!C||p||j,setVisible:x,type:"gif",fullSrc:c,index:i,isPaused:!C,onTogglePaused:R,isFullscreen:f,onFinished:h,isActive:O})]})}function ye(e){var n=e.viewSrc,t=e.fullSrc,c=e.onLoad,a=void 0===c?d.b:c,r=e.index,i=e.width,o=e.height,b=e.detailsVisible,j=e.isFullscreen,f=e.isActive,h=e.onFinished,O=Object(u.useState)(!1),v=Object(s.a)(O,2),m=v[0],p=v[1],x=l.a.useState(!0),w=Object(s.a)(x,2),S=w[0],C=w[1],y=Object(u.useState)(null),F=Object(s.a)(y,2),E=F[0],L=F[1],P=Se(E),A=Object(k.c)(_.y)?"auto":"metadata",T=Object(k.c)(_.f),N=l.a.useCallback(Object(pe.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===E||void 0===E?void 0:E.paused)){e.next=10;break}return e.prev=1,e.next=4,E.play();case 4:p(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0.message.includes("user didn't interact with the document first")?console.warn("Autoplay failed because the user did not interact with the page first:",e.t0):e.t0.message.includes("play() request was interrupted by a call to pause()")?console.warn("Play was interrupted by pause",e.t0):console.error("Failed to start video:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),[E]),V=l.a.useCallback((function(){if(!(null===E||void 0===E?void 0:E.paused))try{null===E||void 0===E||E.pause(),p(!1)}catch(e){console.error("Failed to start video:",e)}}),[E]),B=l.a.useCallback((function(e){E&&(E.currentTime=e)}),[E]),I=l.a.useCallback((function(e){e.stopPropagation(),E&&(E.paused?(N(),C(!1)):V())}),[V,N,E]);return l.a.useEffect((function(){(T||j)&&P&&(N(),C(!1)),P||V()}),[P,j,V,N,T]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(je,{"data-testid":"video",controls:!1,loop:!j,preload:A,ref:L,onLoadedMetadata:a,width:i,height:o,src:n}),Object(g.jsx)(ie,{type:"video",index:r,fullSrc:t,isPaused:!m,duration:(null===E||void 0===E?void 0:E.duration)||0,onTogglePaused:I,onSeek:B,videoRef:E,isVisible:!1===m||b||S,setVisible:C,isFullscreen:j,onFinished:h,isActive:f})]})}function Fe(e){var n=e.type,t=e.thumbnailSrc,c=e.sampleSrc,a=e.fullSrc,r=e.index,i=e.onLoad,o=e.width,u=e.height,d=e.detailsVisible,b=e.isFullscreen,j=void 0!==b&&b,f=e.onBack,h=e.onFinished,O=e.isActive,v=void 0!==O&&O,m=function(e,n,t,c){var a=Object(k.c)(_.q);return l.a.useMemo((function(){switch(e){case"image":return a?["",c]:["",t];case"gif":return t.includes(".gif")?[n,t]:[t,c];case"video":return a?[n,c]:[n,t]}}),[c,a,t,n,e])}(n,t,c,a),p=Object(s.a)(m,2),x=p[0],w=p[1];switch(n){case"image":return Object(g.jsx)(he,{viewSrc:w,fullSrc:a,onLoad:i,index:r,width:o,height:u,isFullscreen:j,onFinished:h,onBack:f,isActive:v});case"gif":return Object(g.jsx)(Ce,{detailsVisible:d,viewSrc:w,thumbnailSrc:x,fullSrc:a,onLoad:i,index:r,width:o,height:u,isFullscreen:j,onFinished:h,onBack:f,isActive:v});case"video":return Object(g.jsx)(ye,{detailsVisible:d,viewSrc:w,thumbnailSrc:x,fullSrc:a,onLoad:i,index:r,width:o,height:u,isFullscreen:j,onFinished:h,onBack:f,isActive:v})}}},209:function(e,n,t){"use strict";t.d(n,"b",(function(){return T})),t.d(n,"a",(function(){return N}));var c,a,r,i=t(3),o=t(5),s=t(1),u=t.n(s),l=t(14),d=t(4),b=t(25),j=t(102),f=t(109),h=t(13),O=t(77),v=t(100),m=t(60),g=t(48),p=t(98),x=t(27),k=t(73),w=t(24),S=t(30),C=t(2);function y(){return Object(x.g)().pathname===b.c.STORIES?Object(C.jsx)(E,{}):Object(C.jsx)(F,{})}function F(){var e=u.a.useCallback((function(){return window.scrollTo(0,0)}),[]);return Object(C.jsxs)(S.b,{onClick:e,children:[Object(C.jsx)(w.b,{})," Take me to the top"]})}function E(){return Object(C.jsx)(k.b,{to:b.c.SEARCH,children:Object(C.jsxs)(S.b,{children:[Object(C.jsx)(w.b,{})," Take me to the top"]})})}var L=d.d.div((function(e){var n=e.theme;return Object(d.c)(c||(c=Object(o.a)(["\n    padding: ",";\n  "])),n.dimensions.bigSpacing)})),P=Object(d.d)(m.b)((function(e){var n=e.theme;return Object(d.c)(a||(a=Object(o.a)(["\n    max-width: ",";\n    margin: auto;\n    text-align: center;\n  "])),n.dimensions.bodyWidth)})),A=Object(d.d)(O.a)(r||(r=Object(o.a)(["\n  max-height: 50vh;\n"])));function T(e){var n=e.onLoad,t=void 0===n?b.b:n,c=e.virtualRef,a=e.style;return Object(C.jsx)(L,{style:a,ref:c,onLoad:t,role:"row",children:Object(C.jsx)(N,{})})}function N(){var e=Object(l.c)(h.e),n=Object(s.useMemo)((function(){return e.reduce((function(e,n){return e[n.name]=Object(i.a)(Object(i.a)({},n),{},{types:[]}),e}),{})}),[e]),t=Object(j.a)();return Object(C.jsxs)(P,{children:[Object(C.jsx)(A,{src:f.a,alt:"Shironeko does not understand"}),Object(C.jsx)(v.a,{}),Object(C.jsx)(g.c,{children:"You have reached the end!"}),Object(C.jsx)("p",{children:"Go look for something else!"}),e.length>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("p",{children:"How about some of these?"}),Object(C.jsx)(p.a,{tags:n,onTagClick:t,onTagMenu:b.b,detailed:!0})]}),Object(C.jsx)(y,{})]})}}}]);
//# sourceMappingURL=1.0cdcd788.chunk.js.map