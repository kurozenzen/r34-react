(this["webpackJsonpr34-react"]=this["webpackJsonpr34-react"]||[]).push([[9],{173:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var c=n(34),a=(n(71),n(1));function r(){const[e,t]=Object(a.useState)(!1),[n,r]=Object(a.useState)(null);return Object(a.useEffect)(()=>{try{const e=c.a.auth().onAuthStateChanged(e=>{e?(t(!0),r(e)):(t(!1),r(null))});return()=>{e()}}catch(e){t(!1),r(null)}},[]),[e,n]}},174:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var c=n(1),a=n.n(c);function r(e){a.a.useEffect(()=>{document.title=e},[e])}},182:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var c=n(1),a=n.n(c),r=n(190),o=n(173);function i(){const[e,t]=a.a.useState({}),[n,c]=a.a.useState(),[,i]=Object(o.a)();return a.a.useEffect(()=>{null!==i&&void 0!==i&&i.email&&async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(i.email).then(e=>{const t=r.a.firestore().collection("users/".concat(e,"/supertags"));return c(t),t.get()}).then(e=>{const n=e.docs.reduce((e,t)=>(e[t.id]=t.data(),e),{});t(n)}).catch(e=>{console.error("Error with useSupertags",e)})},[null===i||void 0===i?void 0:i.email]),a.a.useEffect(()=>{if(n){const e=n.onSnapshot(e=>{const n=e.docs.reduce((e,t)=>(e[t.id]=t.data(),e),{});t(n)});return()=>{e()}}},[n]),e}},208:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return B});var c,a,r,o,i,s,d,l,u=n(5),b=n(1),j=n.n(b),O=n(22),p=n(4),h=n(15),f=n(33),g=n(174),m=n(16),x=n(21),w=n(70),v=n(51),S=n(41),k=n(79),y=n(80),C=n(19),E=n(13),T=n(25),A=n(173),I=n(182),M=n(2);const R=Object(p.d)(w.b)(c||(c=Object(u.a)(["\n  place-content: center;\n  align-items: center;\n  place-content: center;\n  flex-grow: 1;\n"]))),F=Object(p.d)(v.b)(e=>{let{theme:t}=e;return Object(p.c)(a||(a=Object(u.a)(["\n    grid-template-rows: auto auto auto 1fr;\n    grid-template-columns: 1fr auto;\n    padding: ",";\n    justify-content: center;\n    max-width: ",";\n  "])),t.dimensions.hugeSpacing,t.dimensions.modalWidth)}),H=Object(p.d)(S.d)(r||(r=Object(u.a)(["\n  text-align: left;\n  grid-area: 1/1/2/2;\n"]))),J=Object(p.d)(S.b)(o||(o=Object(u.a)(["\n  grid-area: 2/1/3/3;\n"]))),Y=Object(p.d)(x.f)(i||(i=Object(u.a)(["\n  grid-area: 1/2/2/3;\n"]))),q=Object(p.d)(S.b)(s||(s=Object(u.a)(["\n  overflow-x: auto;\n  white-space: nowrap;\n  mask-image: linear-gradient(90deg, #000 95%, transparent);\n  ::-webkit-scrollbar {\n    height: 0px;\n  }\n"]))),z=p.d.span(e=>{let{theme:t}=e;return Object(p.c)(d||(d=Object(u.a)(["\n    ","\n    ","\n    padding: ",";\n    color: ",";\n    grid-area: 3/1/4/3;\n    cursor: pointer;\n\n    :active,\n    :active > span {\n      color: ",";\n    }\n  "])),E.f,T.e,t.dimensions.bigSpacing,t.colors.subduedText,t.colors.accentColor)}),U=Object(p.d)(y.a)(l||(l=Object(u.a)(["\n  grid-area: 4/1/5/3;\n"]))),W=e=>{};function B(){const e=Object(O.g)(),{name:t,description:n,tags:c}=Object(h.b)(e.search);Object(g.a)("Rule34 React - ".concat(t));const a=j.a.useMemo(()=>Object.entries(c).reduce((e,t)=>{let[n,c]=t;return e[n]={name:n,modifier:c,types:[]},e},{}),[c]),r=j.a.useCallback(()=>{navigator.permissions.query({name:"clipboard-write"}).then(e=>{"granted"!==e.state&&"prompt"!==e.state||navigator.clipboard.writeText(window.location.href).then(()=>{},()=>{console.warn("Failed to write to clipboard")})})},[]),[o]=Object(A.a)(),i=Object(I.a)(),s=j.a.useCallback(()=>{Object(f.a)(t,n,c).then(()=>{}).catch(e=>console.error("Failed to import supertag",e))},[n,t,c]),d=j.a.useCallback(()=>Object(f.f)(t),[t]),l=j.a.useMemo(()=>o&&t in i,[t,o,i]);return Object(M.jsxs)(w.a,{children:[Object(M.jsx)(k.a,{}),Object(M.jsxs)(R,{children:[Object(M.jsx)(S.d,{children:"Supertag"}),Object(M.jsxs)(F,{children:[Object(M.jsx)(H,{children:t}),Object(M.jsx)(J,{children:n}),l?Object(M.jsxs)(Y,{disabled:!o,title:o?"Remove from your collection":"You need to be signed in",onClick:d,children:[Object(M.jsx)(m.H,{})," Imported"]}):Object(M.jsxs)(Y,{disabled:!o,title:o?"Import into your collection":"You need to be signed in",onClick:s,children:[Object(M.jsx)(m.z,{})," Import"]}),Object(M.jsxs)(z,{onClick:r,title:"Copy share url",children:[Object(M.jsx)(q,{id:"share-link",children:window.location.href}),Object(M.jsx)(m.j,{})]}),Object(M.jsx)(U,{tags:a,detailed:!1,onTagClick:W,onTagMenu:C.b})]})]})]})}}}]);
//# sourceMappingURL=9.dca15171.chunk.js.map